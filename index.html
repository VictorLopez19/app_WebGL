<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Enlace al archivo de estilos de Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=DotGothic16&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./css/style.css">

    <!-- Font Awesome para los iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="shortcut icon" href="./assets/img/icon.png" type="image/x-icon">

    <title>Pixel War</title>
</head>

<body class="d-flex flex-column justify-content-between" style="height: 100vh">

    <nav class="navbar navbar-dark bg-dark navbar-expand-lg py-3">
        <div class="container-fluid">
            <a class="navbar-brand text-white ms-2" href="#">
                <img src="./assets/img/icon.png" width="30" height="30" class="d-inline-block align-top" alt="">
                Pixel War
            </a>

            <!-- Botón de colapso para pantallas pequeñas -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent"
                aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <!-- Contenedor de elementos del menú -->
            <div class="collapse navbar-collapse" id="navbarContent">
                <div class="ms-auto d-flex flex-column flex-lg-row align-items-lg-center">
                    <!-- Botón Información -->
                    <button class="btn btn-info mt-3 mt-lg-0 mb-2 mb-lg-0 me-lg-3 botones" data-bs-toggle="modal"
                        data-bs-target="#modalInfo">
                        <i class="fas fa-info-circle me-2"></i> Información
                    </button>

                    <!-- Botón Puntajes más altos -->
                    <button class="btn btn-warning botones" data-bs-toggle="modal" data-bs-target="#modalPuntajes">
                        <i class="fas fa-trophy me-2"></i> Puntajes más altos
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Modal Información -->
    <div class="modal fade" id="modalInfo" tabindex="-1" aria-labelledby="modalInfoLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalInfoLabel">Información</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <h5>Objetivo del juego:</h5>
                    <p>El objetivo del juego es evitar que los enemigos te toquen mientras recolectas círculos de
                        colores. Usa el cuadrado como jugador, que puede moverse con las teclas de flecha y saltar con
                        la barra espaciadora.</p>

                    <h5>Controles:</h5>
                    <ul>
                        <li><strong>Movimiento:</strong> Usa las flechas izquierda y derecha para mover el cuadrado.
                        </li>
                        <li><strong>Salto:</strong> Presiona la barra espaciadora para hacer saltar el cuadrado.</li>
                        <li><strong>Disparo:</strong> Haz clic en el área de juego para disparar balas hacia los
                            círculos.</li>
                    </ul>

                    <h5>Reglas:</h5>
                    <ul>
                        <li>Recoge los círculos para ganar puntos.</li>
                        <li>Evita que los enemigos toquen el cuadrado.</li>
                        <li>Cuanto más rápido elimines enemigos, mayor será tu nivel.</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Puntajes Más Altos -->
    <div class="modal fade" id="modalPuntajes" tabindex="-1" aria-labelledby="modalPuntajesLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalPuntajesLabel">Puntajes más altos</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="modalPuntajesBody">
                    <!-- Los puntajes serán insertados aquí -->
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para registrar el puntaje -->
    <div class="modal fade" id="modalRegistroPuntaje" tabindex="-1" aria-labelledby="modalRegistroPuntajeLabel"
        aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalRegistroPuntajeLabel">¡Felicidades!</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                    <p>Has logrado uno de los 5 mejores puntajes. Ingresa tu nombre para guardarlo.</p>
                    <input type="text" id="nombreJugador" class="form-control text-center mt-2" placeholder="Tu nombre"
                        maxlength="10">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" onclick="guardarNuevoPuntaje()">Guardar</button>
                </div>
            </div>
        </div>
    </div>


    <!-- Elemento canvas donde se dibujarán los círculos animados -->
    <div class="d-flex justify-content-center mt-5">

        <div class="content">
            <div id="encabezado" class="d-flex justify-content-between flex-row">

                <div id="stats" class="d-flex flex-row">
                    <div class="col-auto d-flex align-items-center ms-sm-2 ms-1 item">
                        <img src="./assets/img/vidas.jpg" alt="" width="20">
                        <span id="no_vidas" class="text-center ms-sm-1 ms-0"> x5</span>
                    </div>

                    <div class="col-auto d-flex align-items-center ms-sm-2 ms-1 item ">
                        <img src="./assets/img/enemi.png" alt="" width="25">
                        <span id="total_puntaje" class="text-center ms-sm-1 ms-0"> x0</span>
                    </div>

                    <div class="col-auto d-flex align-items-center ms-sm-2 ms-1 item">
                        <img src="./assets/img/bala.jpg" alt="" width="25">
                        <span id="no_balas" class="text-center ms-sm-1 ms-0"> x0</span>
                    </div>

                    <div class="col-auto d-flex align-items-center ms-sm-2 ms-1 item">
                        <span id="nivel" class="text-center ms-sm-1 ms-0"> Nivel 1</span>
                    </div>

                </div>

                <div class="text-center me-2">
                    <div class="pixel-icon button" id="playPauseBtn" style="outline: none; box-shadow: none;">
                        <i class="fas fa-play" id="playPauseIcon"></i>
                    </div>
                </div>

            </div>
            <canvas id="canvas"></canvas>
        </div>
    </div>

    <div id="controles" class="d-flex justify-content-center mt-4">
        <!-- Botón Izquierda -->
        <button class="btn btn-primary control" id="btnIzquierda">
            <i class="fas fa-arrow-left me-2"></i> Izquierda
        </button>

        <!-- Botón Saltar -->
        <button class="btn btn-primary me-3 ms-3 control" id="btnSaltar">
            <i class="fas fa-arrow-up me-2"></i> Saltar
        </button>

        <!-- Botón Derecha -->
        <button class="btn btn-primary control" id="btnDerecha">
            <i class="fas fa-arrow-right me-2"></i> Derecha
        </button>
    </div>

    <!-- Footer -->
    <footer class="bg-dark text-white text-center py-2 mt-5">
        <p class="pt-3">&copy; 2025. Todos los derechos reservados | Victor López</p>
    </footer>

    <!-- Enlace al archivo JavaScript que contiene la lógica del canvas -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="./js/player.js"></script>
    <script src="./js/main.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
</body>

</html>